:root{
  --bg:#0e1a12;
  --felt:#14341f;
  --felt-2:#0f2a19;
  --ink:#eaf6ed;
  --muted:#cfe5d4;
  --accent:#7be495;
  --danger:#ff8a8a;
  --slot:#1e3b28;
  --card:#173b2a;           /* color base de carta (opaco) */
  --card-edge:#2a6d4a;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
}

/* --- layout general (igual que antes) --- */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:var(--ink);
  background:
    radial-gradient(1200px 600px at 50% -200px, #1d4d33 0%, transparent 60%),
    linear-gradient(180deg, var(--bg), #0b1410 60%, #080f0b);
}
.turn-banner{position:fixed;top:16px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.55);backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,.15);color:var(--ink);padding:10px 16px;border-radius:12px;font-weight:800;letter-spacing:.4px;z-index:20;opacity:0;transition:opacity .25s,transform .25s}
.turn-banner.show{opacity:1;transform:translateX(-50%)}
.hidden{display:none}
.topbar{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:12px;padding:12px clamp(12px,3vw,28px);border-bottom:1px solid rgba(255,255,255,.06);background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,0));position:sticky;top:0;z-index:5}
.side{display:flex;align-items:center;gap:12px}
.side-right{justify-content:flex-end}
.name{opacity:.9;letter-spacing:.3px}
.pollution{width:56px;height:56px;border-radius:50%;display:grid;place-items:center;background:radial-gradient(circle at 30% 30%, #2c6b49, #123822);box-shadow:inset 0 0 0 3px var(--accent),var(--shadow);font-weight:700;font-variant-numeric:tabular-nums}
.pollution.hit{animation:pop 420ms ease}
@keyframes pop{0%{transform:scale(1)}40%{transform:scale(1.12)}100%{transform:scale(1)}}
.timer-wrap{text-align:center}.timer-label{opacity:.8;font-size:.9rem}#timer{font-size:1.8rem;font-weight:800;letter-spacing:.5px}.rule{opacity:.75;font-size:.85rem}
.board{max-width:1100px;margin:clamp(8px,2.4vw,24px) auto;background:radial-gradient(900px 500px at 50% -120px,var(--felt),var(--felt-2));border-radius:20px;padding:clamp(12px,2.8vw,28px);box-shadow:var(--shadow);border:1px solid rgba(255,255,255,.06)}
.lane{display:grid;grid-template-columns:repeat(5,1fr);gap:clamp(8px,1.6vw,18px);padding:clamp(8px,1.6vw,18px)}
.slot{position:relative;height:110px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,.06), transparent 40%),linear-gradient(0deg, rgba(0,0,0,.25), rgba(0,0,0,.1));outline:2px dashed rgba(255,255,255,.12);outline-offset:-8px;display:grid;place-items:center;color:var(--muted);user-select:none}
.slot.own-target{outline-color:var(--accent);filter:drop-shadow(0 0 10px rgba(123,228,149,.35))}
.slot.enemy-target{outline-color:var(--danger)}
.slot.flash{animation:slotFlash 420ms ease}
@keyframes slotFlash{0%{box-shadow:0 0 0 0 rgba(123,228,149,0)}40%{box-shadow:0 0 18px 6px rgba(123,228,149,.45)}100%{box-shadow:0 0 0 0 rgba(123,228,149,0)}}

/* --- CARTA: mismo tamaño que antes + fondo opaco --- */
.card{
  background: var(--card);             /* opaco, sin transparencias */
  border:2px solid var(--card-edge);
  color:var(--ink);
  width:120px; height:160px;           /* MISMO tamaño */
  border-radius:14px;
  box-shadow:var(--shadow);
  cursor:pointer;
  outline:3px solid transparent;
  user-select:none;
  transition:transform .12s ease, box-shadow .12s ease, outline-color .12s ease;
  display:flex;
}
.card:hover{ transform: translateY(-4px) }
.card.selected{ outline-color: var(--accent); transform: translateY(-6px) }

/* Contenedor interno para superponer imagen y textos */
.card-inner{
  position:relative;
  display:flex; flex-direction:column; justify-content:space-between;
  padding:10px; width:100%; height:100%;
}

/* Imagen de carta: no cambia tamaño del contenedor */
.card-img{
  position:absolute;
  inset:8px;                           /* respeta borde */
  border-radius:8px;
  object-fit:cover;
  z-index:1;                           /* por debajo del texto */
  pointer-events:none;
  opacity:1;                           /* imagen plena, fondo de la carta sigue opaco */
}

/* Velo suave para legibilidad cuando hay imagen */
.card.has-image::after{
  content:""; position:absolute; inset:0; z-index:1;
  border-radius:14px;
  background: linear-gradient(180deg, rgba(0,0,0,.12), rgba(0,0,0,.35));
}

/* Capas de contenido (título/número/tag) por encima de la imagen */
.card .title, .card .number, .card .tag{ position:relative; z-index:2; }
.card .title{font-weight:700}
.card .number{font-size:2.2rem;font-weight:900;text-align:center;font-variant-numeric:tabular-nums}
.card .tag{font-size:.75rem;opacity:.95;text-align:center;background:rgba(0,0,0,.25);border-radius:8px;padding:4px 6px}

/* Carta en slot: ocupa todo y rebota (mismo tamaño relativo al hueco) */
.card.in-slot{ width:100%; height:100%; border-radius:12px; animation:dropBounce 240ms ease }
.card.in-slot .card-inner{ padding:8px }
@keyframes dropBounce{0%{transform:scale(.9)}55%{transform:scale(1.02)}100%{transform:scale(1)}}
.card.in-slot .number{ font-size: clamp(1.4rem, 3.2vw, 2rem) }
.card.in-slot .title{ font-size: clamp(.9rem, 2.6vw, 1rem) }
.card.in-slot .tag{ font-size: clamp(.65rem, 2.2vw, .8rem) }

/* Clon en vuelo */
.card.fly{ position:fixed; pointer-events:none; transition:transform 220ms ease, opacity 220ms ease; z-index:15 }

/* Mano / overlay (igual) */
.hand-wrap{max-width:1100px;margin:0 auto 28px;padding:0 clamp(12px,2.8vw,28px)}
.hand-title{margin:8px 0 6px;font-size:1rem;opacity:.85}
.hand{display:flex;flex-wrap:wrap;gap:12px;min-height:176px}
.turn-indicator{margin-top:6px;opacity:.85}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);display:grid;place-items:center;z-index:30}
.overlay.hidden{display:none}
.overlay-card{background:#11281b;border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:22px;width:min(90vw,420px);text-align:center;box-shadow:var(--shadow)}
.overlay-card h2{margin:0 0 8px}
.overlay-card p{margin:0 0 16px;opacity:.9}
.btn{background:var(--accent);color:#042312;font-weight:800;border:none;border-radius:12px;padding:10px 14px;cursor:pointer;box-shadow:var(--shadow)}
.btn:hover{filter:brightness(1.05)}
.zoom{position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.55);z-index:25}
.zoom.hidden{display:none}
.zoom-card{width:min(80vw,340px);height:min(80vh,480px);border-radius:20px;padding:16px;background:var(--card); /* opaco */ border:2px solid var(--card-edge);box-shadow:var(--shadow);display:flex;flex-direction:column;justify-content:space-between;animation:zoomIn 160ms ease}
@keyframes zoomIn{from{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}
@media (max-width:720px){.slot{height:90px}.card{width:110px;height:150px}.pollution{width:50px;height:50px}}