:root{
  --bg:#0e1a12;
  --felt:#14341f;
  --felt-2:#0f2a19;
  --ink:#eaf6ed;
  --muted:#cfe5d4;
  --accent:#7be495;
  --danger:#ff8a8a;
  --slot:#1e3b28;
  --card:#173b2a;
  --card-edge:#2a6d4a;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color:var(--ink);
  background:
    radial-gradient(1200px 600px at 50% -200px, #1d4d33 0%, transparent 60%),
    linear-gradient(180deg, var(--bg), #0b1410 60%, #080f0b);
}

/* Cartel de turno */
.turn-banner{
  position: fixed; top: 16px; left: 50%; transform: translateX(-50%);
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(4px);
  border:1px solid rgba(255,255,255,.15);
  color: var(--ink); padding: 10px 16px; border-radius: 12px;
  font-weight: 800; letter-spacing:.4px; z-index: 20;
  opacity: 0; transition: opacity .25s ease, transform .25s ease;
}
.turn-banner.show{ opacity:1; transform: translateX(-50%) translateY(0) }
.hidden{ display:none }

/* Top bar */
.topbar{
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;
  gap:12px;
  padding:12px clamp(12px, 3vw, 28px);
  border-bottom:1px solid rgba(255,255,255,.06);
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0));
  position:sticky; top:0; z-index:5;
}

.side{display:flex; align-items:center; gap:12px}
.side-right{justify-content:flex-end}
.name{opacity:.9; letter-spacing:.3px}

.pollution{
  width:56px; height:56px; border-radius:50%;
  display:grid; place-items:center;
  background: radial-gradient(circle at 30% 30%, #2c6b49, #123822);
  box-shadow: inset 0 0 0 3px var(--accent), var(--shadow);
  font-weight:700; font-variant-numeric: tabular-nums;
}
.pollution.hit{
  animation: pop 420ms ease;
}
@keyframes pop{
  0%{ transform: scale(1); box-shadow: inset 0 0 0 3px var(--accent), var(--shadow); }
  40%{ transform: scale(1.12); box-shadow: inset 0 0 0 5px #9ff0b3, var(--shadow); }
  100%{ transform: scale(1); box-shadow: inset 0 0 0 3px var(--accent), var(--shadow); }
}

/* Timer */
.timer-wrap{text-align:center}
.timer-label{opacity:.8; font-size:.9rem}
#timer{font-size:1.8rem; font-weight:800; letter-spacing:.5px}
.rule{opacity:.75; font-size:.85rem}

/* Board */
.board{
  max-width:1100px;
  margin: clamp(8px, 2.4vw, 24px) auto;
  background: radial-gradient(900px 500px at 50% -120px, var(--felt), var(--felt-2));
  border-radius:20px;
  padding: clamp(12px, 2.8vw, 28px);
  box-shadow: var(--shadow);
  border:1px solid rgba(255,255,255,.06);
}

.lane{
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap: clamp(8px, 1.6vw, 18px);
  padding: clamp(8px, 1.6vw, 18px);
}

.slot{
  position:relative;
  height:110px;
  border-radius:14px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), transparent 40%),
    linear-gradient(0deg, rgba(0,0,0,.25), rgba(0,0,0,.1));
  outline:2px dashed rgba(255,255,255,.12);
  outline-offset:-8px;
  display:grid; place-items:center;
  color:var(--muted);
  user-select:none;
}
.slot.empty::after{
  content:"Hueco";
  font-size:.9rem;
  opacity:.6;
}
.slot.own-target{ outline-color: var(--accent); filter: drop-shadow(0 0 10px rgba(123,228,149,.35)); }
.slot.enemy-target{ outline-color: var(--danger) }

.card{
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border:2px solid var(--card-edge);
  background-color: var(--card);
  color:var(--ink);
  width:120px; height:160px; border-radius:14px;
  display:flex; flex-direction:column; justify-content:space-between;
  padding:10px;
  box-shadow: var(--shadow);
  cursor:pointer;
  transition: transform .12s ease, box-shadow .12s ease, outline-color .12s ease;
  outline:3px solid transparent;
  user-select:none;
}
.card:hover{ transform: translateY(-4px) }
.card.selected{ outline-color: var(--accent); transform: translateY(-6px) }
.card .title{font-weight:700}
.card .number{
  font-size:2.2rem; font-weight:900; text-align:center;
  font-variant-numeric: tabular-nums;
}
.card .tag{
  font-size:.75rem; opacity:.85; text-align:center;
  background:rgba(255,255,255,.06); border-radius:8px; padding:4px 6px;
}

/* Carta dentro de slot (versi√≥n compacta) */
.card.compact{
  width:100px; height:140px;
}
.card.fly{
  position: fixed;
  pointer-events: none;
  transition: transform 220ms ease, opacity 220ms ease;
  z-index: 15;
}

/* Hand */
.hand-wrap{max-width:1100px; margin: 0 auto 28px; padding: 0 clamp(12px, 2.8vw, 28px);}
.hand-title{margin: 8px 0 6px; font-size:1rem; opacity:.85}
.hand{display:flex; flex-wrap:wrap; gap:12px; min-height:176px}
.turn-indicator{margin-top:6px; opacity:.85}

/* Overlay final */
.overlay{
  position:fixed; inset:0;
  background: rgba(0,0,0,.6);
  display:grid; place-items:center;
  z-index: 30;
}
.overlay.hidden{ display:none }
.overlay-card{
  background: #11281b; border:1px solid rgba(255,255,255,.08);
  border-radius:16px; padding:22px;
  width:min(90vw, 420px);
  text-align:center; box-shadow: var(--shadow);
}
.overlay-card h2{margin:0 0 8px}
.overlay-card p{margin:0 0 16px; opacity:.9}
.btn{
  background: var(--accent); color:#042312; font-weight:800;
  border:none; border-radius:12px; padding:10px 14px;
  cursor:pointer; box-shadow: var(--shadow);
}
.btn:hover{ filter: brightness(1.05) }

/* Zoom de carta */
.zoom{
  position: fixed; inset: 0;
  display: grid; place-items: center;
  background: rgba(0,0,0,.55);
  z-index: 25;
}
.zoom.hidden{ display:none }
.zoom-card{
  width: min(80vw, 340px); height: min(80vh, 480px);
  border-radius: 20px; padding: 16px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border: 2px solid var(--card-edge);
  box-shadow: var(--shadow);
  display:flex; flex-direction:column; justify-content:space-between;
  animation: zoomIn 160ms ease;
}
@keyframes zoomIn{
  from{ transform: scale(.9); opacity: 0; }
  to{ transform: scale(1); opacity: 1; }
}

/* Responsive tweaks */
@media (max-width: 720px){
  .slot{height:90px}
  .card{width:110px; height:150px}
  .pollution{width:50px; height:50px}
}